import socket
import threading

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind(("0.0.0.0", 9001))
s.listen(2)
(client, (ip, port)) = s.accept()
print(f'Got connection from {ip}')

client.send(b'Welcome to this ECHO server\n')
while True:
    cmd = input('> ')
    client.send(cmd.encode())
    response = client.recv(2048)
    if response.decode('utf-8') == "ERROR":
        print("Something went wrong")
    else:
        print(response.decode())

